{"version":3,"file":"component---src-pages-events-rule-events-md-38be5b2f6baca4532fec.js","mappings":"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","sources":["webpack://commerce-events/./src/pages/events/rule-events.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-events/commerce-events/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"create-rule-events\"\n    }}>{`Create rule events`}</h1>\n    <p>{`You may decide that you want Adobe I/O Events for Adobe Commerce to notify the client application when certain conditions occur. For example, by default, if you register an event that tracks the remaining quantity of the product, the eventing service sends that information to your client application each time Commerce emits the event. However, you might be interested in the remaining quantity only when it reaches a specific threshold, such as 20 units. Rule events allow you to define exactly when to send events to your application. Otherwise, the client application must include code to filter out the unimportant and unnecessary data.`}</p>\n    <p>{`A rule event acts as an extension of a custom or native Commerce event. You must specify the source, or parent, event and define one or more rules that evaluate the data that is present in the payload in the parent event. If all the individual rules defined in a rule event evaluate as true, then the eventing service sends the rule event to the application. If one or more rules evaluate as false, the service sends the parent event instead.`}</p>\n    <p>{`All rule events contain the following information:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`A unique name for the rule event.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`The code name of the parent event. You must attach a rule event to a specific registered event.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`One or more rules.`}</p>\n      </li>\n    </ul>\n    <p>{`Each rule contains the following:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`A field that is defined in the parent event.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`An operator, which is represented as a comparison statement between the value supplied in the parent event's payload and the threshold value.`}</p>\n        <p parentName=\"li\">{`The operator must be one of the following:`}</p>\n        <table parentName=\"li\">\n          <thead parentName=\"table\">\n            <tr parentName=\"thead\">\n              <th parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Operator`}</th>\n              <th parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Description`}</th>\n            </tr>\n          </thead>\n          <tbody parentName=\"table\">\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`greaterThan`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the value supplied in the payload of the event is greater than a specified value. Applicable for integer and float data types.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`lessThan`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value is less than a specified value. Applicable for integer and float data types.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`equal`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value matches the specified value. For Boolean data types, use `}<inlineCode parentName=\"td\">{`1`}</inlineCode>{` to compare to `}<inlineCode parentName=\"td\">{`true`}</inlineCode>{` and `}<inlineCode parentName=\"td\">{`0`}</inlineCode>{` to compare to `}<inlineCode parentName=\"td\">{`false`}</inlineCode>{`.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`regex`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`A regular expression that checks for matches. The specified value must be compatible with the  `}<a parentName=\"td\" {...{\n                  \"href\": \"https://www.php.net/manual/en/function.preg-match.php\"\n                }}>{`regular expression match`}</a></td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`in`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value is one of multiple specified values. The value must be a comma-separated list. You do not need to provide additional escape characters.`}</td>\n            </tr>\n          </tbody>\n        </table>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`The value to compare against. When you assign the `}<inlineCode parentName=\"p\">{`regex`}</inlineCode>{` operator, you must delimit the regular expression value with valid characters, such as forward slashes (/). For example, `}<inlineCode parentName=\"p\">{`/^TV .*/i`}</inlineCode>{`, which checks whether the string contains the string `}<inlineCode parentName=\"p\">{`TV`}</inlineCode>{`, ignoring the case of the letters.`}</p>\n      </li>\n    </ul>\n    <p>{`You can create rule events within your module's `}<inlineCode parentName=\"p\">{`io_events.xml`}</inlineCode>{` file or from the command line.`}</p>\n    <h2 {...{\n      \"id\": \"define-rule-events-in-io_eventsxml\"\n    }}>{`Define rule events in `}<inlineCode parentName=\"h2\">{`io_events.xml`}</inlineCode></h2>\n    <p>{`The following example creates and registers a rule event named `}<inlineCode parentName=\"p\">{`plugin.magento.catalog.model.resource_model.product.save_low_stock_event`}</inlineCode>{`. Its parent is `}<inlineCode parentName=\"p\">{`plugin.magento.catalog.model.resource_model.product.save`}</inlineCode>{`. It defines rules that trigger when all of the conditions are true:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The value of `}<inlineCode parentName=\"li\">{`qty`}</inlineCode>{` is less than 20`}</li>\n      <li parentName=\"ul\">{`The value of `}<inlineCode parentName=\"li\">{`price`}</inlineCode>{` is greater than 100`}</li>\n      <li parentName=\"ul\">{`The `}<inlineCode parentName=\"li\">{`category_id`}</inlineCode>{` is either 3, 4, or 5`}</li>\n      <li parentName=\"ul\">{`The product `}<inlineCode parentName=\"li\">{`name`}</inlineCode>{` contains `}<inlineCode parentName=\"li\">{`TV`}</inlineCode></li>\n    </ul>\n    <p>{`These fields are present and declared in the parent event.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"...\">\n    <event name=\"plugin.magento.catalog.model.resource_model.product.save_low_stock_event\"\n           parent=\"plugin.magento.catalog.model.resource_model.product.save\"\n    >\n        <fields>\n            <field name=\"qty\"/>\n            <field name=\"category_id\"/>\n            <field name=\"name\">\n        </fields>\n        <rules>\n            <rule>\n                <field>qty</field>\n                <operator>lessThan</operator>\n                <value>20</value>\n            </rule>\n            <rule>\n                <field>category_id</field>\n                <operator>in</operator>\n                <value>3,4,5</value>\n            </rule>\n            <rule>\n                <field>name</field>\n                <operator>regex</operator>\n                <value>/^TV .*/i</value>\n            </rule>\n        </rules>\n    </event>\n</config>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"command-line\"\n    }}>{`Command line`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`bin/magento events:subscribe <event_code> --force --fields=<name1> --fields=<name2>`}</inlineCode>{` command creates and registers custom and native Commerce events. When you also specify the `}<inlineCode parentName=\"p\">{`--parent <event_code>`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`--rules=<field-name>|<operator>|<value>`}</inlineCode>{` options, you create and register a rule event.`}</p>\n    <p>{`The following command creates and registers the same rule event shown in the `}<inlineCode parentName=\"p\">{`io_events.xml`}</inlineCode>{` example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento events:subscribe plugin.magento.catalog.model.resource_model.product.save_low_stock_event \\\\\n--parent plugin.magento.catalog.model.resource_model.product.save \\\\\n--fields=qty --fields=category_id --fields=name \\\\\n--rules=\"qty|lessThan|20\" --rules=\"category_id|in|3,4,5\" --rules=\"name|regex|/^TV .*/i\"\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"known-limitations\"\n    }}>{`Known limitations`}</h2>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Registering a plugin-type event rule causes the system to generate a plugin for the parent rule. no additional generation is required for observer-type events.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Rule events that evaluate as false are not stored in the database or sent to the eventing service.`}</p>\n      </li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}