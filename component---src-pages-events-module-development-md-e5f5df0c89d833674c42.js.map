{"version":3,"file":"component---src-pages-events-module-development-md-e5f5df0c89d833674c42.js","mappings":"6QAQaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,aAAAA,GAEIE,EAAYC,EAAAA,EACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,+BADR,gCAGA,4JAA6I,cAAGC,WAAW,IACvJ,KAAQ,gDACP,uBAAYA,WAAW,KAAvB,oBAFwI,YAA7I,MAGA,eACE,GAAM,mBADR,oBAGA,4FACA,oBACE,eAAIA,WAAW,MAAf,cAAkC,uBAAYA,WAAW,MAAvB,iBAAlC,yBACA,eAAIA,WAAW,MAAf,+BAAmD,uBAAYA,WAAW,MAAvB,cAAnD,WAEF,6RAA8Q,uBAAYA,WAAW,KAAvB,0DAA9Q,YACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,skHAqHL,gIAAiH,uBAAYA,WAAW,KAAvB,SAAjH,4GAA8Q,uBAAYA,WAAW,KAAvB,cAA9Q,0CAA8W,uBAAYA,WAAW,KAAvB,uBAA9W,mBAAgc,uBAAYA,WAAW,KAAvB,yBAAhc,MACA,0EAA2D,cAAGA,WAAW,IACrE,KAAQ,iFAD+C,kCAA3D,uCAGA,eACE,GAAM,gBADR,kBAGA,iCAAkB,uBAAYA,WAAW,KAAvB,mCAAlB,gIAA6N,cAAGA,WAAW,IACvO,KAAQ,oDACP,uBAAYA,WAAW,KAAvB,sBAFwN,YAA7N,MAGA,2EAA4D,uBAAYA,WAAW,KAAvB,YAA5D,6DACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBADZ,qsCAoCL,yCAA0B,uBAAYA,WAAW,KAAvB,gDAA1B,yCACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,oZAiBL,eACE,GAAM,aADR,eAGA,6CAA8B,uBAAYA,WAAW,KAAvB,aAA9B,6BAAgH,cAAGA,WAAW,IAC1H,KAAQ,gHACP,uBAAYA,WAAW,KAAvB,4BAFL,oFAGA,mCACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBADZ,wiBA0BL,0CAA2B,uBAAYA,WAAW,KAAvB,gDAA3B,mCAAsJ,cAAGA,WAAW,IAChK,KAAQ,mBACP,uBAAYA,WAAW,KAAvB,kBAFL,MAGA,eACE,GAAM,gDADR,iDAGA,2MACA,oDAAqC,uBAAYA,WAAW,KAAvB,6BAArC,wBAAkI,uBAAYA,WAAW,KAAvB,gDAAlI,oBAA8O,uBAAYA,WAAW,KAAvB,aAA9O,SAA4S,uBAAYA,WAAW,KAAvB,OAA5S,aACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBADZ,2WAWL,0BAAW,uBAAYA,WAAW,KAAvB,6BAAX,4CAA4H,uBAAYA,WAAW,KAAvB,aAA5H,2BACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBADZ,87BA4BR,CAEDJ,EAAWK,gBAAiB,C","sources":["webpack://commerce-events/./src/pages/events/module-development.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-events/commerce-events/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"commerce-module-development\"\n    }}>{`Commerce module development`}</h1>\n    <p>{`This topic describes how to enable your custom modules for Adobe I/O Events. You can also manually register observer events using the `}<a parentName=\"p\" {...{\n        \"href\": \"./commands.md#subscribe-to-a-commerce-event\"\n      }}><inlineCode parentName=\"a\">{`events:subscribe`}</inlineCode>{` command`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"register-events\"\n    }}>{`Register events`}</h2>\n    <p>{`You can programmatically register events using the following methods:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Create an `}<inlineCode parentName=\"li\">{`io_events.xml`}</inlineCode>{` file in your module`}</li>\n      <li parentName=\"ul\">{`Declare them in the system `}<inlineCode parentName=\"li\">{`config.php`}</inlineCode>{` file`}</li>\n    </ul>\n    <p>{`For each event you register, you must define which fields to transmit to your App Builder application. The payload of an event can be massive. In addition, some events include sensitive or PCI compliance data by default. The following payload is returned for the `}<inlineCode parentName=\"p\">{`com.adobe.commerce.observer.catalog_product_save_after`}</inlineCode>{` event:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  position: 'camel:3f25472c-5f70-4f36-84be-2248d2e2d421.camel:9cd9055e-f56d-4fd3-8017-9db5ac1c2b3b.e501d499-cfc8-450d-bc42-8637bbf12601.0.1663803959.o3fdxogbstwwnxbxq2r-',\n  event: {\n    data: {\n      key: '04ac68a4-27bd-4339-a6b1-fddb3c968a2b',\n      value: [Object],\n      source: 'demo.demo',\n      pipelineMessageId: '1663803954935:545088:VA7_A1:128:0'\n    },\n    id: 'c23e6bec-f1ee-4eef-97ec-cf22f04bc5b1',\n    source: 'urn:uuid:9dd02f4d-c439-481a-9ccd-ac43af7ae821',\n    specversion: '1.0',\n    type: 'com.adobe.commerce.observer.catalog_product_save_after',\n    datacontenttype: 'application/json',\n    time: '2022-09-21T23:45:56.702Z',\n    event_id: 'e501d499-cfc8-450d-bc42-8637bbf12601',\n    recipient_client_id: '76e82e864661495b89d774b0e49adfb9'\n  }\n}\n{\n  key: '04ac68a4-27bd-4339-a6b1-fddb3c968a2b',\n  value: {\n    _edit_mode: true,\n    store_id: '0',\n    entity_id: '3',\n    attribute_set_id: '4',\n    type_id: 'simple',\n    sku: 'test2',\n    has_options: false,\n    required_options: false,\n    created_at: '2022-07-28 14:13:40',\n    updated_at: '2022-09-06 20:37:25',\n    row_id: '3',\n    created_in: '1',\n    updated_in: '2147483647',\n    name: 'test2',\n    meta_title: 'test2',\n    meta_description: 'test2 ',\n    page_layout: 'product-full-width',\n    options_container: 'container2',\n    url_key: 'test2',\n    msrp_display_actual_price_type: '0',\n    gift_message_available: '2',\n    gift_wrapping_available: '2',\n    is_returnable: '2',\n    status: '1',\n    visibility: '4',\n    tax_class_id: '2',\n    price: '123.000000',\n    meta_keyword: 'test2',\n    options: [],\n    media_gallery: { images: [], values: [] },\n    tier_price: [],\n    tier_price_changed: 0,\n    quantity_and_stock_status: { is_in_stock: '1', qty: '333' },\n    category_ids: [ '4' ],\n    is_salable: 1,\n    stock_data: {\n      item_id: '3',\n      product_id: '3',\n      stock_id: '1',\n      qty: '333',\n      min_qty: '0',\n      use_config_min_qty: '1',\n      is_qty_decimal: '0',\n      backorders: '0',\n      use_config_backorders: '1',\n      min_sale_qty: '1',\n      use_config_min_sale_qty: '1',\n      max_sale_qty: '10000',\n      use_config_max_sale_qty: '1',\n      is_in_stock: '1',\n      notify_stock_qty: '1',\n      use_config_notify_stock_qty: '1',\n      manage_stock: '1',\n      use_config_manage_stock: '1',\n      stock_status_changed_auto: '0',\n      use_config_qty_increments: '1',\n      qty_increments: '1',\n      use_config_enable_qty_inc: '1',\n      enable_qty_increments: '0',\n      is_decimal_divided: 0,\n      website_id: '0',\n      deferred_stock_update: '0',\n      use_config_deferred_stock_update: '1',\n      type_id: 'simple',\n      min_qty_allowed_in_shopping_cart: [Array]\n    },\n    use_config_gift_message_available: '1',\n    use_config_gift_wrapping_available: '1',\n    current_product_id: '3',\n    affect_product_custom_options: '1',\n    current_store_id: '0',\n    product_has_weight: '1',\n    is_new: '0',\n    website_ids: { '1': '1' },\n    url_key_create_redirect: 'test2',\n    ignore_links_flag: false,\n    can_save_custom_options: true,\n    save_rewrites_history: true,\n    can_save_bundle_selections: false,\n    is_custom_option_changed: true,\n    parent_id: 0,\n    special_from_date_is_formated: true,\n    custom_design_from_is_formated: true,\n    news_from_date_is_formated: true,\n    news_to_date_is_formated: true,\n    is_changed_categories: false,\n    is_changed_websites: false,\n    force_reindex_eav_required: true\n  },\n  source: 'demo.demo',\n  pipelineMessageId: '1663803954935:545088:VA7_A1:128:0'\n}\n`}</code></pre>\n    <p>{`You define an array of fields to transmit in your configuration file. Specify any field within an event's `}<inlineCode parentName=\"p\">{`value`}</inlineCode>{` object to ensure it is transmitted to an application. If the field is part of a secondary object, such `}<inlineCode parentName=\"p\">{`stock_data`}</inlineCode>{` in the above example, use the format `}<inlineCode parentName=\"p\">{`<object-name>.field`}</inlineCode>{`. For example: `}<inlineCode parentName=\"p\">{`stock_data.product_id`}</inlineCode>{`.`}</p>\n    <p>{`After you've registered at least one event, run the `}<a parentName=\"p\" {...{\n        \"href\": \"./commands.md#generate-a-commerce-module-based-on-a-list-of-subscribed-events\"\n      }}>{`events:generate:module command`}</a>{` to generate the required plugins.`}</p>\n    <h3 {...{\n      \"id\": \"io_eventsxml\"\n    }}>{`io_events.xml`}</h3>\n    <p>{`Create the `}<inlineCode parentName=\"p\">{`<module-root>/etc/io_events.xml`}</inlineCode>{` file and define a list of events that should always be transmitted. Events listed in this file cannot be disabled with the `}<a parentName=\"p\" {...{\n        \"href\": \"./commands.md#unsubscribe-from-a-commerce-event\"\n      }}><inlineCode parentName=\"a\">{`events:unsubscribe`}</inlineCode>{` command`}</a>{`.`}</p>\n    <p>{`The following example registers multiple events. The `}<inlineCode parentName=\"p\">{`<fields>`}</inlineCode>{` element defines the contents of each transmitted event.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:module-commerce-events-client/etc/io_events.xsd\">\n    <event name=\"commerce.observer.catalog_product_save_after\">\n        <fields>\n            <field name=\"entity_id\" />\n            <field name=\"sku\" />\n            <field name=\"is_new\" />\n        </fields>\n    </event>\n    <event name=\"plugin.magento.gift_wrapping.model.resource_model.wrapping.save\">\n        <fields>\n            <field name=\"id\" />\n            <field name=\"name\" />\n            <field name=\"status\" />\n        </fields>\n    </event>\n    <event name=\"plugin.magento.sales.api.invoice_item_repository.save\">         \n        <fields>\n            <field name=\"id\" />\n            <field name=\"name\" />\n            <field name=\"status\" />\n        </fields>\n    </event>\n    <event name=\"observer.store_group_save_after\">\n        <fields>\n            <field name=\"id\" />\n            <field name=\"name\" />\n        </fields>\n    </event>\n</config>\n\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:module-commerce-events-client/etc/io_events.xsd\">\n\n</config>\n`}</code></pre>\n    <p>{`The contents of an `}<inlineCode parentName=\"p\">{`commerce.observer.catalog_product_save_after`}</inlineCode>{` event are similar to the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  position: 'camel:3f25472c-5f70-4f36-84be-2248d2e2d421.camel:9cd9055e-f56d-4fd3-8017-9db5ac1c2b3b.e501d499-cfc8-450d-bc42-8637bbf12601.0.1663803959.o3fdxogbstwwnxbxq2r-',\n  ....\n}\n{\n  key: '04ac68a4-27bd-4339-a6b1-fddb3c968a2b',\n  value: {\n    entity_id: '3',\n    sku: 'test2',\n    is_new: '0'\n  },\n  source: 'demo.demo',\n  pipelineMessageId: '1663803954935:545088:VA7_A1:128:0'\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"configphp\"\n    }}>{`config.php`}</h3>\n    <p>{`You can also create an `}<inlineCode parentName=\"p\">{`io_events`}</inlineCode>{` section in the Commerce `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/files/deployment-files.html\"\n      }}><inlineCode parentName=\"a\">{`app/etc/config.php file`}</inlineCode></a>{`. Events registered using this mechanism can be disabled from the command line.`}</p>\n    <p>{`For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`'io_events' => [\n    'commerce.observer.catalog_product_save_after' => [\n        'fields' => [\n            'entity_id',\n            'sku',\n            'is_new',\n        ],\n        'enabled' => 1\n    ],\n    'plugin.magento.catalog.api.product_link_repository.save' => [\n        'fields' => [\n            'id',\n            'name',\n        ],\n        'enabled' => 1\n    ],\n     'plugin.magento.catalog.api.product_link_repository.delete' => [\n        'fields' => [\n            'id',\n        ],\n        'enabled' => 1\n    ],\n]\n`}</code></pre>\n    <p>{`The payload for the `}<inlineCode parentName=\"p\">{`commerce.observer.catalog_product_save_after`}</inlineCode>{` event is the same as shown in `}<a parentName=\"p\" {...{\n        \"href\": \"#io_events.xml\"\n      }}><inlineCode parentName=\"a\">{`io_events.xml`}</inlineCode></a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"configuration-merging-from-different-modules\"\n    }}>{`Configuration merging from different modules`}</h2>\n    <p>{`If multiple Commerce modules register the same event, the configuration manager merges the two configurations. The transmitted event includes all the fields defined in the modules.`}</p>\n    <p>{`In the following example, the `}<inlineCode parentName=\"p\">{`MODULE1/etc/io_events.xml`}</inlineCode>{` file registers the `}<inlineCode parentName=\"p\">{`commerce.observer.catalog_product_save_after`}</inlineCode>{` event with the `}<inlineCode parentName=\"p\">{`entity_id`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`sku`}</inlineCode>{` fields.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:module-commerce-events-client/etc/io_events.xsd\">\n    <event name=\"commerce.observer.catalog_product_save_after\">\n        <fields>\n            <field name=\"entity_id\" />\n            <field name=\"sku\" />\n        </fields>\n    </event>\n</config>\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`MODULE2/etc/io_events.xml`}</inlineCode>{` file registers the same event with the `}<inlineCode parentName=\"p\">{`entity_id`}</inlineCode>{` field and two others.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:module-commerce-events-client/etc/io_events.xsd\">\n    <event name=\"commerce.observer.catalog_product_save_after\">\n        <fields>\n            <field name=\"entity_id\" />\n            <field name=\"quantity_and_stock_status.gty\" />\n            <field name=\"stock_data.min_qty\" />\n        </fields>\n    </event>\n</config>\n\nThe resulting configuration:\n\n\\`\\`\\`xml\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:module-commerce-events-client/etc/io_events.xsd\">\n    <event name=\"commerce.observer.catalog_product_save_after\">\n        <fields>             \n            <field name=\"entity_id\" />\n            <field name=\"sku\" />\n            <field name=\"quantity_and_stock_status.gty\" />\n            <field name=\"stock_data.min_qty\" />\n        </fields>\n    </event>\n</config>\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}